"use strict";(self.webpackChunktodo_list_app=self.webpackChunktodo_list_app||[]).push([[932],{7386:(_,m,n)=>{n.d(m,{R:()=>f});var d=n(4650);let f=(()=>{class c{}return c.\u0275fac=function(g){return new(g||c)},c.\u0275cmp=d.Xpm({type:c,selectors:[["app-loader"]],decls:1,vars:0,consts:[["src","/assets/img/loading_animation.svg",1,"loading"]],template:function(g,r){1&g&&d._UZ(0,"img",0)},styles:[".loading[_ngcontent-%COMP%]{height:300px;width:300px;animation:rotation 3s infinite ease-in-out}@keyframes rotation{0%{transform:rotate(0)}50%{transform:rotate(180deg)}to{transform:rotate(360deg)}}"]}),c})()},3657:(_,m,n)=>{n.d(m,{q:()=>c});var d=n(6895),f=n(4650);let c=(()=>{class p{}return p.\u0275fac=function(r){return new(r||p)},p.\u0275mod=f.oAB({type:p}),p.\u0275inj=f.cJS({imports:[d.ez]}),p})()},9932:(_,m,n)=>{n.r(m),n.d(m,{ProfileModule:()=>F});var d=n(6895),f=n(9116),c=n(3657),p=n(1208),g=n(4004),r=n(4006),x=n(3638),e=n(4650),C=n(8896),v=n(1581),P=n(7386),u=n(9549),h=n(4144);function M(o,l){if(1&o){const t=e.EpF();e.TgZ(0,"div",18),e._UZ(1,"img",19),e.TgZ(2,"div",20)(3,"label",21),e._UZ(4,"i",22),e.qZA(),e.TgZ(5,"input",23),e.NdJ("change",function(i){e.CHM(t);const s=e.oxw(2);return e.KtG(s.fileChangeEvent(i))}),e.qZA()()()}if(2&o){const t=e.oxw(2);e.xp6(1),e.Q6J("src",t.profileForm.get("profile_photo").value,e.LSH)}}function b(o,l){if(1&o){const t=e.EpF();e.TgZ(0,"div",24)(1,"label",25),e._uU(2,"Select image"),e.qZA(),e.TgZ(3,"input",23),e.NdJ("change",function(i){e.CHM(t);const s=e.oxw(2);return e.KtG(s.fileChangeEvent(i))}),e.qZA()()}}function O(o,l){if(1&o){const t=e.EpF();e.TgZ(0,"div",20)(1,"label",21),e._UZ(2,"i",22),e.qZA(),e.TgZ(3,"input",23),e.NdJ("change",function(i){e.CHM(t);const s=e.oxw(3);return e.KtG(s.fileChangeEvent(i))}),e.qZA()()}}function y(o,l){if(1&o){const t=e.EpF();e.TgZ(0,"div",26)(1,"image-cropper",27),e.NdJ("imageCropped",function(i){e.CHM(t);const s=e.oxw(2);return e.KtG(s.imageCropped(i))})("imageLoaded",function(i){e.CHM(t);const s=e.oxw(2);return e.KtG(s.imageLoaded(i))})("loadImageFailed",function(){e.CHM(t);const i=e.oxw(2);return e.KtG(i.loadImageFailed())}),e.qZA(),e.YNc(2,O,4,0,"div",28),e.qZA()}if(2&o){const t=e.oxw(2);e.xp6(1),e.Q6J("imageChangedEvent",t.imageChangedEvent)("maintainAspectRatio",!0)("aspectRatio",1)("resizeToWidth",160),e.xp6(1),e.Q6J("ngIf",t.croppedImage)}}function Z(o,l){1&o&&(e.TgZ(0,"mat-error"),e._uU(1,"Email is required"),e.qZA())}function I(o,l){1&o&&(e.TgZ(0,"mat-error"),e._uU(1,"Please enter a correct email format"),e.qZA())}function T(o,l){if(1&o){const t=e.EpF();e.TgZ(0,"div",4)(1,"h1",5),e._uU(2,"Edit profile"),e.qZA(),e.TgZ(3,"form",6)(4,"div",7)(5,"div",8)(6,"h3",9),e._uU(7,"Select profile picture (JPG/JPEG/PNG)"),e.qZA()(),e.YNc(8,M,6,1,"div",10),e.YNc(9,b,4,0,"div",11),e.YNc(10,y,3,5,"div",12),e.qZA(),e.TgZ(11,"div",13)(12,"mat-form-field",14)(13,"mat-label"),e._uU(14,"Name"),e.qZA(),e._UZ(15,"input",15),e.YNc(16,Z,2,0,"mat-error",16),e.YNc(17,I,2,0,"mat-error",16),e.qZA(),e.TgZ(18,"button",17),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i.submit())}),e._uU(19,"Submit"),e.qZA()()()()}if(2&o){const t=e.oxw();e.xp6(3),e.Q6J("formGroup",t.profileForm),e.xp6(5),e.Q6J("ngIf",!t.croppedImage&&t.profileForm.get("profile_photo").value),e.xp6(1),e.Q6J("ngIf",!t.croppedImage&&!t.profileForm.get("profile_photo").value),e.xp6(1),e.Q6J("ngIf",t.imageChangedEvent),e.xp6(6),e.Q6J("ngIf",null==t.username||null==t.username.errors?null:t.username.errors.required),e.xp6(1),e.Q6J("ngIf",null==t.username||null==t.username.errors?null:t.username.errors.email),e.xp6(1),e.Q6J("disabled",!t.profileForm.valid)}}function w(o,l){1&o&&(e.TgZ(0,"div",29),e._UZ(1,"app-loader"),e.qZA())}const E=[{path:"",component:(()=>{class o{constructor(t,a,i){this.fb=t,this.userService=a,this.snackbar=i,this.edit=!1,this.imageChangedEvent="",this.croppedImage="",this.showCropper=!1}ngOnInit(){this.getUser(),this.initForm()}initForm(){this.profileForm=this.fb.group({username:new r.NI("",[r.kI.required,r.kI.pattern(x.e.NamePattern)]),profile_photo:"",key:"",image:new r.NI("")})}getUser(){this.userService.getUser().snapshotChanges().pipe((0,g.U)(t=>t.map(a=>({key:a.payload.key,...a.payload.val()})))).subscribe(t=>{this.user=t[0],this.username.setValue(this.user.username),this.profile_photo.setValue(this.user.profile_photo),this.key.setValue(this.user.key)})}getControl(t){return this.profileForm.get(t)}get username(){return this.profileForm.get("username")}get profile_photo(){return this.profileForm.get("profile_photo")}get key(){return this.profileForm.get("key")}fileChangeEvent(t){"image/jpeg"===t.target.files[0].type||"image/jpg"===t.target.files[0].type||"image/png"===t.target.files[0].type?this.imageChangedEvent=t:this.snackbar.openSnackBar("Invalid image format","error","Close")}imageCropped(t){this.croppedImage=t.base64}imageLoaded(t){this.showCropper=!0}loadImageFailed(){this.snackbar.openSnackBar("Load image is failed","error","Close")}submit(){this.profileForm.valid&&(this.profileForm.key=this.user.key,this.croppedImage&&this.profile_photo.setValue(this.croppedImage),this.userService.updateUser(this.profileForm.value).then(()=>{this.snackbar.openSnackBar("Profile was updated","success","Close")}))}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(r.qu),e.Y36(C.f),e.Y36(v.c))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-profile"]],decls:5,vars:2,consts:[[1,"profile-container"],[1,"profile-box"],["class","profile",4,"ngIf","ngIfElse"],["loading",""],[1,"profile"],[1,"text-center"],[1,"form",3,"formGroup"],[1,"img-crop-container"],[1,"title-box"],[1,"h3","text-center"],["class","edit-photo",4,"ngIf"],["class","file-input",4,"ngIf"],["class","cropper",4,"ngIf"],[1,"input-box"],["appearance","outline","color","primary","floatLabel","always",1,"input"],["formControlName","username","matInput","","placeholder","example@gmail.com","required",""],[4,"ngIf"],["mat-flat-button","",1,"btn",3,"disabled","click"],[1,"edit-photo"],[1,"prof-photo",3,"src"],[1,"edit-photo-btn"],["for","upload-photo",1,"btn-round","btn-edit"],[1,"fa-regular","fa-pen-to-square"],["type","file","id","upload-photo",3,"change"],[1,"file-input"],["for","upload-photo",1,"btn-upload"],[1,"cropper"],["format","png",1,"image-cropper-box",3,"imageChangedEvent","maintainAspectRatio","aspectRatio","resizeToWidth","imageCropped","imageLoaded","loadImageFailed"],["class","edit-photo-btn",4,"ngIf"],[1,"loading"]],template:function(t,a){if(1&t&&(e.TgZ(0,"div",0)(1,"div",1),e.YNc(2,T,20,7,"div",2),e.YNc(3,w,2,0,"ng-template",null,3,e.W1O),e.qZA()()),2&t){const i=e.MAs(4);e.xp6(2),e.Q6J("ngIf",a.user)("ngIfElse",i)}},dependencies:[d.O5,P.R,p.ap,r._Y,r.Fj,r.JJ,r.JL,r.Q7,r.sg,r.u,u.TO,u.KE,u.hX,h.Nt],styles:[".profile-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:100%;width:100%}.profile-container[_ngcontent-%COMP%]   .profile-box[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;padding-top:70px;width:100%;height:100%;z-index:1}.profile[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;max-height:80vh;width:400px;padding:48px;background-color:var(--white);border:1px solid var(--light-grey)}.form[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center}.input-box[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin-top:24px;width:240px}.input-box[_ngcontent-%COMP%]   .input[_ngcontent-%COMP%]{width:240px}h1[_ngcontent-%COMP%]{font-size:24px;font-weight:500;text-align:center}.h3[_ngcontent-%COMP%]{margin-bottom:8px}.btn[_ngcontent-%COMP%]{height:50px;padding:0 18px;width:240px;color:var(--white);background-color:var(--accent)}.btn[_ngcontent-%COMP%]:hover{background-color:var(--accent-hover)}.img-crop-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center}.img-crop-container[_ngcontent-%COMP%]   .title-box[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:center;gap:16px}.cropper[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;position:relative;gap:12px;width:140px}.cropper[_ngcontent-%COMP%]   .image-cropper-box[_ngcontent-%COMP%]{max-height:160px;width:140px}.btn-upload[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:140px;width:140px;border:2px dashed var(--accent);color:var(--accent);cursor:pointer;transition:all .4s ease-in-out}.btn-upload[_ngcontent-%COMP%]:hover{color:var(--black);border:2px dashed var(--black)}.edit-photo[_ngcontent-%COMP%]{position:relative}.edit-photo[_ngcontent-%COMP%]   .prof-photo[_ngcontent-%COMP%]{width:140px;border-radius:50%}.edit-photo-btn[_ngcontent-%COMP%]{display:flex;position:absolute;right:12px;bottom:4px;justify-content:center;align-items:center;height:34px;width:34px;border-radius:50%;border:0;color:var(--white);background-color:var(--black);z-index:99;cursor:pointer;transition:all .4s ease-in-out}.edit-photo-btn[_ngcontent-%COMP%]:hover{background-color:var(--accent)}.edit-photo-btn[_ngcontent-%COMP%]   .btn-round[_ngcontent-%COMP%]{cursor:pointer}.file-input[_ngcontent-%COMP%]{margin:0 auto}.img-box[_ngcontent-%COMP%]{border-radius:50%}#upload-photo[_ngcontent-%COMP%]{opacity:0;position:absolute;z-index:-1}@media only screen and (max-width: 1600px){.profile[_ngcontent-%COMP%]{padding:36px}}@media only screen and (max-width: 1024px){.profile-container[_ngcontent-%COMP%]   .profile-box[_ngcontent-%COMP%]{height:100%;width:100%;padding:18px}.profile[_ngcontent-%COMP%]{padding:24px;width:400px}.btn-upload[_ngcontent-%COMP%]{height:180px;width:180px}.button-box[_ngcontent-%COMP%], .cropper[_ngcontent-%COMP%], .btn[_ngcontent-%COMP%], .input-box[_ngcontent-%COMP%], .input-box[_ngcontent-%COMP%]   .input[_ngcontent-%COMP%]{width:180px}}@media only screen and (max-width: 600px){.profile-container[_ngcontent-%COMP%]   .profile-box[_ngcontent-%COMP%]{align-items:flex-start;padding-top:88px}.profile[_ngcontent-%COMP%]{padding:18px;width:100%;height:100%}}"]}),o})()}];let F=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[d.ez,f.Bz.forChild(E),c.q,p.QG,r.UX,u.lN,h.c]}),o})()}}]);